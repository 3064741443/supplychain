<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.glsx.supplychain.mapper.DeviceFileMapper">
    <resultMap id="BaseResultMap" type="cn.com.glsx.supplychain.model.DeviceFile">
        <id column="ID" jdbcType="INTEGER" property="id"/>
        <result column="SN" jdbcType="VARCHAR" property="sn"/>
        <result column="IMEI" jdbcType="VARCHAR" property="imei"/>
        <result column="DEVICE_CODE" jdbcType="INTEGER" property="deviceCode"/>
        <result column="ORDER_CODE" jdbcType="VARCHAR" property="orderCode"/>
        <result column="VERIF_CODE" jdbcType="VARCHAR" property="verifCode"/>
        <result column="BATCH_NO" jdbcType="VARCHAR" property="batchNo"/>
        <result column="PACKAGE_ID" jdbcType="INTEGER" property="packageId"/>
        <result column="ANDROID_PACKAGE_ID" jdbcType="INTEGER" property="androidPackageId"/>
        <result column="OPERATOR_MERCHANT_NO" jdbcType="VARCHAR" property="operatorMerchantNo"/>
        <result column="SEND_MERCHANT_NO" jdbcType="VARCHAR" property="sendMerchantNo"/>
        <result column="IN_STORAGE_TIME" jdbcType="VARCHAR" property="inStorageTime"/>
        <result column="OUT_STORAGE_TIME" jdbcType="VARCHAR" property="outStorageTime"/>
        <result column="OUT_STORAGE_TYPE" jdbcType="VARCHAR" property="outStorageType"/>
        <result column="TERMINAL_DISCODE" jdbcType="VARCHAR" property="terminalDiscode"/>
        <result column="EXTERNAL_FLAG" jdbcType="VARCHAR" property="externalFlag"/>
        <result column="MANUFACTURER_CODE" jdbcType="VARCHAR" property="manufacturerCode"/>
        <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy"/>
        <result column="CREATED_DATE" jdbcType="TIMESTAMP" property="createdDate"/>
        <result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy"/>
        <result column="UPDATED_DATE" jdbcType="TIMESTAMP" property="updatedDate"/>
        <result column="DELETED_FLAG" jdbcType="VARCHAR" property="deletedFlag"/>
        <result column="FIRMWARE_ID" jdbcType="INTEGER" property="firmwareId"/>
        <result column="CARD_ID" jdbcType="INTEGER" property="cardId"/>

        <association property="snapshot" javaType="cn.com.glsx.supplychain.model.DeviceFileSnapshot">
            <id column="SN" jdbcType="VARCHAR" property="sn"/>
            <result column="OSS_ID" jdbcType="INTEGER" property="id"/>
            <result column="OSS_PACKAGE_STATU" jdbcType="VARCHAR" property="packageStatu"/>
            <result column="OSS_PACKAGE_ID" jdbcType="INTEGER" property="packageId"/>
            <result column="OSS_ANDROID_PACKAGE_ID" jdbcType="INTEGER" property="androidPackageId"/>
            <result column="OSS_PACKAGE_USER_ID" jdbcType="INTEGER" property="packageUserId"/>
            <result column="OSS_PACKAGE_USER_TIME" jdbcType="VARCHAR" property="packageUserTime"/>
            <result column="OSS_USER_ID" jdbcType="INTEGER" property="userId"/>
            <result column="OSS_USER_TIME" jdbcType="VARCHAR" property="userTime"/>
            <result column="OSS_CARD_ID" jdbcType="INTEGER" property="cardId"/>
            <result column="OSS_CARD_TIME" jdbcType="VARCHAR" property="cardTime"/>
            <result column="OSS_FIRMWARE_ID" jdbcType="INTEGER" property="firmwareId"/>
            <result column="OSS_VEHICLE_ID" jdbcType="INTEGER" property="vehicleId"/>
        </association>

        <association property="initialCardManager" javaType="cn.com.glsx.supplychain.model.DeviceCardManager">
            <id column="ID" jdbcType="INTEGER" property="id"/>
            <result column="FCM_ICCID" jdbcType="VARCHAR" property="iccid"/>
            <result column="FCM_IMSI" jdbcType="VARCHAR" property="imsi"/>
        </association>

        <association property="deviceCardManager" javaType="cn.com.glsx.supplychain.model.DeviceCardManager">
            <id column="ID" jdbcType="INTEGER" property="id"/>
            <result column="SCM_ICCID" jdbcType="VARCHAR" property="iccid"/>
            <result column="SCM_IMSI" jdbcType="VARCHAR" property="imsi"/>
        </association>

        <association property="deviceActiveUserManager" javaType="cn.com.glsx.supplychain.model.DeviceUserManager">
            <id column="ID" jdbcType="INTEGER" property="id"/>
            <result column="U_USER_FLAG" jdbcType="VARCHAR" property="userFlag"/>
        </association>

        <association property="deviceUserManager" javaType="cn.com.glsx.supplychain.model.DeviceUserManager">
            <id column="ID" jdbcType="INTEGER" property="id"/>
            <result column="UM_USER_FLAG" jdbcType="VARCHAR" property="userFlag"/>
        </association>
        <!--
        <association property="deviceCodeTable" javaType="cn.com.glsx.supplychain.model.DeviceCode">
            <id column="DEVICE_CODE" jdbcType="INTEGER" property="deviceCode" />
            <result column="ODC_ID" jdbcType="INTEGER" property="id" />
            <result column="ODC_DEVICE_NAME" jdbcType="VARCHAR" property="deviceName" />
            <result column="ODC_MERCHANT_ID" jdbcType="INTEGER" property="merchantId" />
            <result column="ODC_TYPE_ID" jdbcType="INTEGER" property="typeId" />
        </association>
        -->
        <!--
        <association property="deviceCardManager" javaType="cn.com.glsx.supplychain.model.DeviceCardManager">
            <id column="OC_ID" jdbcType="INTEGER" property="id" />
            <result column="ICCID" jdbcType="VARCHAR" property="iccid" />
            <result column="IMSI" jdbcType="VARCHAR" property="imsi" />
        </association>

        <association property="deviceActiveUserManager" javaType="cn.com.glsx.supplychain.model.DeviceUserManager">
            <id column="OAU_ID" jdbcType="INTEGER" property="id" />
            <result column="OAU_USER_FLAG" jdbcType="VARCHAR" property="userFlag" />
        </association>

        <association property="deviceUserManager" javaType="cn.com.glsx.supplychain.model.DeviceUserManager">
            <id column="OU_ID" jdbcType="INTEGER" property="id" />
            <result column="OU_USER_FLAG" jdbcType="VARCHAR" property="userFlag" />
        </association>
        -->
    </resultMap>

    <resultMap id="deviceFileMap" type="cn.com.glsx.supplychain.model.DeviceFile">
        <id column="ID" jdbcType="INTEGER" property="id"/>
        <result column="SN" jdbcType="VARCHAR" property="sn"/>
        <result column="IMEI" jdbcType="VARCHAR" property="imei"/>
        <result column="DEVICE_CODE" jdbcType="INTEGER" property="deviceCode"/>
        <result column="ORDER_CODE" jdbcType="VARCHAR" property="orderCode"/>
        <result column="VERIF_CODE" jdbcType="VARCHAR" property="verifCode"/>
        <result column="BATCH_NO" jdbcType="VARCHAR" property="batchNo"/>
        <result column="PACKAGE_ID" jdbcType="INTEGER" property="packageId"/>
        <result column="ANDROID_PACKAGE_ID" jdbcType="INTEGER" property="androidPackageId"/>
        <result column="OPERATOR_MERCHANT_NO" jdbcType="VARCHAR" property="operatorMerchantNo"/>
        <result column="SEND_MERCHANT_NO" jdbcType="VARCHAR" property="sendMerchantNo"/>
        <result column="IN_STORAGE_TIME" jdbcType="VARCHAR" property="inStorageTime"/>
        <result column="OUT_STORAGE_TIME" jdbcType="VARCHAR" property="outStorageTime"/>
        <result column="OUT_STORAGE_TYPE" jdbcType="VARCHAR" property="outStorageType"/>
        <result column="TERMINAL_DISCODE" jdbcType="VARCHAR" property="terminalDiscode"/>
        <result column="EXTERNAL_FLAG" jdbcType="VARCHAR" property="externalFlag"/>
        <result column="MANUFACTURER_CODE" jdbcType="VARCHAR" property="manufacturerCode"/>
        <result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy"/>
        <result column="CREATED_DATE" jdbcType="TIMESTAMP" property="createdDate"/>
        <result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy"/>
        <result column="UPDATED_DATE" jdbcType="TIMESTAMP" property="updatedDate"/>
        <result column="DELETED_FLAG" jdbcType="VARCHAR" property="deletedFlag"/>
        <result column="FIRMWARE_ID" jdbcType="INTEGER" property="firmwareId"/>
        <result column="CARD_ID" jdbcType="INTEGER" property="cardId"/>
    </resultMap>

    <sql id="File_Column_List">
   		f.SN,f.IMEI,f.ID,f.DEVICE_CODE,f.ORDER_CODE, f.VERIF_CODE, f.BATCH_NO,f.PACKAGE_ID,f.OPERATOR_MERCHANT_NO,
   		f.SEND_MERCHANT_NO,f.IN_STORAGE_TIME,f.OUT_STORAGE_TIME,f.OUT_STORAGE_TYPE,f.TERMINAL_DISCODE,f.FIRMWARE_ID,
   		f.EXTERNAL_FLAG,f.ANDROID_PACKAGE_ID,f.CARD_ID,
   		s.PACKAGE_USER_ID as OSS_PACKAGE_USER_ID, s.PACKAGE_STATU as OSS_PACKAGE_STATU,s.USER_ID as OSS_USER_ID,s.CARD_ID as OSS_CARD_ID, s.FIRMWARE_ID as OSS_FIRMWARE_ID,
   		s.PACKAGE_USER_TIME as OSS_PACKAGE_USER_TIME,s.USER_TIME as OSS_USER_TIME,s.VEHICLE_ID as OSS_VEHICLE_ID,s.PACKAGE_ID as OSS_PACKAGE_ID,s.ANDROID_PACKAGE_ID as OSS_ANDROID_PACKAGE_ID
   </sql>

    <sql id="Base_Column_List">
    	ID, SN,IMEI, DEVICE_CODE, ORDER_CODE, VERIF_CODE, BATCH_NO, PACKAGE_ID, ANDROID_PACKAGE_ID, 
    	OPERATOR_MERCHANT_NO, SEND_MERCHANT_NO, IN_STORAGE_TIME, OUT_STORAGE_TIME, OUT_STORAGE_TYPE, 
    	TERMINAL_DISCODE, EXTERNAL_FLAG, MANUFACTURER_CODE, CREATED_BY, CREATED_DATE, UPDATED_BY, 
    	UPDATED_DATE, DELETED_FLAG,FIRMWARE_ID,CARD_ID
   </sql>


    <!--
    <sql id="File_Column_List">
        f.SN,f.ID,f.DEVICE_CODE,f.ORDER_CODE, f.VERIF_CODE, f.BATCH_NO,f.PACKAGE_ID,f.OPERATOR_MERCHANT_NO,
      f.SEND_MERCHANT_NO,r.ICCID,r.IMSI,a.USER_FLAG as OAU_USER_FLAG,u.USER_FLAG as OU_USER_FLAG,c.DEVICE_NAME as ODC_DEVICE_NAME,c.TYPE_ID as ODC_TYPE_ID,f.IN_STORAGE_TIME,f.OUT_STORAGE_TIME,
        f.OUT_STORAGE_TYPE,f.TERMINAL_DISCODE,s.PACKAGE_USER_ID as OSS_PACKAGE_USER_ID, s.PACKAGE_STATU as OSS_PACKAGE_STATU,s.USER_ID as OSS_USER_ID,s.CARD_ID as OSS_CARD_ID, f.FIRMWARE_ID,s.FIRMWARE_ID as OSS_FIRMWARE_ID,
      s.PACKAGE_USER_TIME as OSS_PACKAGE_USER_TIME,s.USER_TIME as OSS_USER_TIME,s.VEHICLE_ID as OSS_VEHICLE_ID,f.EXTERNAL_FLAG,f.ANDROID_PACKAGE_ID,s.PACKAGE_ID as OSS_PACKAGE_ID,s.ANDROID_PACKAGE_ID as OSS_ANDROID_PACKAGE_ID,f.CARD_ID
    </sql>

    <sql id="Base_Column_List">
      ID, SN, DEVICE_CODE, ORDER_CODE, VERIF_CODE, BATCH_NO, PACKAGE_ID, ANDROID_PACKAGE_ID,
      OPERATOR_MERCHANT_NO, SEND_MERCHANT_NO, IN_STORAGE_TIME, OUT_STORAGE_TIME, OUT_STORAGE_TYPE,
      TERMINAL_DISCODE, EXTERNAL_FLAG, MANUFACTURER_CODE, CREATED_BY, CREATED_DATE, UPDATED_BY,
      UPDATED_DATE, DELETED_FLAG,FIRMWARE_ID,CARD_ID
    </sql>
    -->

    <select id="findDeviceFileByDeviceSns" parameterType="java.util.List" resultType="java.lang.String">
        select `SN` from device_file where 1=1
        <if test="list != null and list.size() &gt; 0">
            AND `SN` IN
            <foreach collection="list" item="deviceSn" open="(" close=")" separator=",">
                #{deviceSn}
            </foreach>
        </if>
    </select>
    
    <select id="listDeviceFilesBySns" parameterType="java.util.List" resultMap="deviceFileMap">
    	select 
    	<include refid="Base_Column_List" />
    	from device_file where DELETED_FLAG = 'N'
    	<if test="list != null and list.size() &gt; 0">
    		and `SN` in
    		<foreach collection="list" item="deviceSn" open="(" close=")" separator=",">
                #{deviceSn}
            </foreach>
    	</if>
    </select>

    <select id="prePageDeviceFile" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="BaseResultMap">
        select
        <include refid="File_Column_List"/>
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        where #{pageFirstId,jdbcType=VARCHAR} > f.ID
        <if test="sn != null and sn != ''">
            AND f.SN = #{sn,jdbcType=VARCHAR}
        </if>
        <if test="packageId != null and packageId != 0">
            AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
        </if>
        <if test="sendMerchantNo != null and sendMerchantNo !=0">
            AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
        </if>
        <if test="externalFlag != null and externalFlag !=''">
            AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
        </if>
        <if test="androidPackageId != null and androidPackageId !=''">
            AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
            AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
        </if>
        <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
            AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
            AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
        </if>
        <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
            AND f.DEVICE_CODE IN
            <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                #{deviceCode}
            </foreach>
        </if>
        ORDER BY f.ID asc limit #{checkNumber,jdbcType=INTEGER}
    </select>

    <select id="nexPageDeviceFile" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="BaseResultMap">
        select
        <include refid="File_Column_List"/>
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        where f.ID >= #{pageFirstId,jdbcType=VARCHAR}
        <if test="sn != null and sn != ''">
            AND f.SN = #{sn,jdbcType=VARCHAR}
        </if>
        <if test="packageId != null and packageId != 0">
            AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
        </if>
        <if test="deviceCode != null and deviceCode != 0">
            AND f.DEVICE_CODE = #{deviceCode,jdbcType=INTEGER}
        </if>
        <if test="sendMerchantNo != null and sendMerchantNo !=0">
            AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
        </if>
        <if test="externalFlag != null and externalFlag !=''">
            AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
        </if>
        <if test="androidPackageId != null and androidPackageId !=''">
            AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
            AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
        </if>
        <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
            AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
            AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
        </if>
        <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
            AND f.DEVICE_CODE IN
            <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                #{deviceCode}
            </foreach>
        </if>
        ORDER BY f.ID asc limit #{checkNumber,jdbcType=INTEGER}
    </select>

    <select id="nexListDeviceFileIds" parameterType="cn.com.glsx.supplychain.model.DeviceFile"
            resultType="java.lang.Integer">
        select
        f.ID
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        where f.ID > #{pageFirstId,jdbcType=VARCHAR}
        <if test="sn != null and sn != ''">
            AND f.SN = #{sn,jdbcType=VARCHAR}
        </if>
        <if test="packageId != null and packageId != 0">
            AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
        </if>
        <if test="deviceCode != null and deviceCode != 0">
            AND f.DEVICE_CODE = #{deviceCode,jdbcType=INTEGER}
        </if>
        <if test="sendMerchantNo != null and sendMerchantNo !=0">
            AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
        </if>
        <if test="externalFlag != null and externalFlag !=''">
            AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
        </if>
        <if test="androidPackageId != null and androidPackageId !=''">
            AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
            AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
        </if>
        <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
            AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
            AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
        </if>
        <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
            AND f.DEVICE_CODE IN
            <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                #{deviceCode}
            </foreach>
        </if>
        ORDER BY f.ID asc limit #{checkNumber,jdbcType=INTEGER}
    </select>


    <select id="agoListDeviceFileIds" parameterType="cn.com.glsx.supplychain.model.DeviceFile"
            resultType="java.lang.Integer">
        select
        f.ID
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        where f.ID &lt; #{pageFirstId,jdbcType=VARCHAR}
        <if test="sn != null and sn != ''">
            AND f.SN = #{sn,jdbcType=VARCHAR}
        </if>
        <if test="packageId != null and packageId != 0">
            AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
        </if>
        <if test="deviceCode != null and deviceCode != 0">
            AND f.DEVICE_CODE = #{deviceCode,jdbcType=INTEGER}
        </if>
        <if test="sendMerchantNo != null and sendMerchantNo !=0">
            AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
        </if>
        <if test="externalFlag != null and externalFlag !=''">
            AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
        </if>
        <if test="androidPackageId != null and androidPackageId !=''">
            AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
            AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
        </if>
        <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
            AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
        </if>
        <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
            AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
        </if>
        <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
            AND f.DEVICE_CODE IN
            <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                #{deviceCode}
            </foreach>
        </if>
        ORDER BY f.ID desc limit #{checkNumber,jdbcType=INTEGER}
    </select>

    <select id="pageDeviceFile" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="BaseResultMap">
        select
        <include refid="File_Column_List"/>
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        <where>
            <if test="sn != null and sn != ''">
                AND f.SN = #{sn,jdbcType=VARCHAR}
            </if>
            <if test="packageId != null and packageId != 0">
                AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
            </if>
            <if test="deviceCode != null and deviceCode != ''">
                and f.DEVICE_CODE = #{deviceCode,jdbcType=VARCHAR}
            </if>
            <if test="sendMerchantNo != null and sendMerchantNo !=0">
                AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
            </if>
            <if test="externalFlag != null and externalFlag !=''">
                AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
            </if>
            <if test="androidPackageId != null and androidPackageId !=''">
                AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
            </if>
            <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
                AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
            </if>
            <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
                AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
            </if>
            <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
                AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
            </if>
            <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
                AND f.DEVICE_CODE IN
                <foreach collection="deviceCodes" item="code" open="(" close=")" separator=",">
                    #{code}
                </foreach>
            </if>
            <if test="outStorageStartDate != null">
                and CONVERT(DATE_FORMAT(f.OUT_STORAGE_TIME,'%Y%m%d%'),SIGNED) &gt;=
                CONVERT(DATE_FORMAT(#{outStorageStartDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="outStorageEndDate != null">
                and CONVERT(DATE_FORMAT(f.OUT_STORAGE_TIME,'%Y%m%d'),SIGNED) &lt;=
                CONVERT(DATE_FORMAT(#{outStorageEndDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="packageUserStartDate != null">
                and CONVERT(DATE_FORMAT(s.PACKAGE_USER_TIME,'%Y%m%d%'),SIGNED) &gt;=
                CONVERT(DATE_FORMAT(#{packageUserStartDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="packageUserEndDate != null">
                and CONVERT(DATE_FORMAT(s.PACKAGE_USER_TIME,'%Y%m%d'),SIGNED) &lt;=
                CONVERT(DATE_FORMAT(#{packageUserEndDate},'%Y%m%d'),SIGNED)
            </if>
        </where>
        ORDER BY f.ID desc <!--  limit #{pageStart,jdbcType=INTEGER},#{pageSize,jdbcType=INTEGER}-->
    </select>

    <select id="exportDeviceFile" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="BaseResultMap">
        select
        fcm.ICCID as FCM_ICCID,
        fcm.IMSI  as FCM_IMSI,
        scm.ICCID  as SCM_ICCID,
        scm.IMSI  as SCM_IMSI,
        u.USER_FLAG as U_USER_FLAG,
        um.USER_FLAG as UM_USER_FLAG,
        <include refid="File_Column_List"/>
        from device_file as f
        left join device_file_snapshot as s on(f.SN=s.SN)
        left join device_card_manager  as fcm on f.CARD_ID = fcm.ID
        left join device_card_manager  as scm on s.CARD_ID = scm.ID
        left join device_user_manager as u on s.PACKAGE_USER_ID = u.ID
        left join device_user_manager as um on s.USER_ID = um.ID
        <where>
            <if test="sn != null and sn != ''">
                AND f.SN = #{sn,jdbcType=VARCHAR}
            </if>
            <if test="packageId != null and packageId != 0">
                AND f.PACKAGE_ID = #{packageId,jdbcType=INTEGER}
            </if>
            <if test="sendMerchantNo != null and sendMerchantNo !=0">
                AND f.SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
            </if>
            <if test="externalFlag != null and externalFlag !=''">
                AND f.EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
            </if>
            <if test="androidPackageId != null and androidPackageId !=''">
                AND f.ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
            </if>
            <if test="snapshot != null and snapshot.packageStatu != null and snapshot.packageStatu !=''">
                AND s.PACKAGE_STATU = #{snapshot.packageStatu,jdbcType=VARCHAR}
            </if>
            <if test="snapshot != null and snapshot.userId != null and snapshot.userId !=0">
                AND s.USER_ID = #{snapshot.userId,jdbcType=INTEGER}
            </if>
            <if test="snapshot != null and snapshot.cardId != null and snapshot.cardId !=0">
                AND s.CARD_ID = #{snapshot.cardId,jdbcType=INTEGER}
            </if>
            <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
                AND f.DEVICE_CODE IN
                <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                    #{deviceCode}
                </foreach>
            </if>
            <if test="outStorageStartDate != null">
                and CONVERT(DATE_FORMAT(OUT_STORAGE_TIME,'%Y%m%d%'),SIGNED) &gt;=
                CONVERT(DATE_FORMAT(#{outStorageStartDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="outStorageEndDate != null">
                and CONVERT(DATE_FORMAT(OUT_STORAGE_TIME,'%Y%m%d'),SIGNED) &lt;=
                CONVERT(DATE_FORMAT(#{outStorageEndDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="packageUserStartDate != null">
                and CONVERT(DATE_FORMAT(s.PACKAGE_USER_TIME,'%Y%m%d%'),SIGNED) &gt;=
                CONVERT(DATE_FORMAT(#{packageUserStartDate},'%Y%m%d'),SIGNED)
            </if>
            <if test="packageUserEndDate != null">
                and CONVERT(DATE_FORMAT(s.PACKAGE_USER_TIME,'%Y%m%d'),SIGNED) &lt;=
                CONVERT(DATE_FORMAT(#{packageUserEndDate},'%Y%m%d'),SIGNED)
            </if>
        </where>
        ORDER BY f.ID DESC
    </select>

    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="deviceFileMap">
        select
        <include refid="Base_Column_List"/>
        from device_file
        where ID = #{id,jdbcType=INTEGER}
    </select>
    <select id="selectByUniqueKey" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="deviceFileMap">
        select
        <include refid="Base_Column_List"/>
        from device_file
        where SN = #{sn,jdbcType=VARCHAR}
    </select>
    <select id="selectBySn" parameterType="cn.com.glsx.supplychain.model.DeviceFile" resultMap="deviceFileMap">
        select
        <include refid="Base_Column_List"/>
        from device_file
        where SN = #{sn,jdbcType=VARCHAR}
    </select>
    <select id="countDevicesByCondition" parameterType="cn.com.glsx.supplychain.model.DeviceFile"
            resultType="java.lang.Integer">
        select count(id) from device_file where id>0
        <if test="sn != null and sn != ''">
            AND SN = #{sn,jdbcType=VARCHAR}
        </if>
        <if test="packageId != null and packageId != 0">
            AND PACKAGE_ID = #{packageId,jdbcType=INTEGER}
        </if>
        <if test="sendMerchantNo != null and sendMerchantNo !=0">
            AND SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=INTEGER}
        </if>
        <if test="externalFlag != null and externalFlag !=''">
            AND EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR}
        </if>
        <if test="androidPackageId != null and androidPackageId !=''">
            AND ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER}
        </if>
        <if test="deviceCodes != null and deviceCodes.size() &gt; 0">
            AND DEVICE_CODE IN
            <foreach collection="deviceCodes" item="deviceCode" open="(" close=")" separator=",">
                #{deviceCode}
            </foreach>
        </if>
    </select>
    <select id="countDeviceFilesByDeviceCode" parameterType="java.lang.Integer" resultType="java.lang.Integer">
  	select count(1) from device_file where DEVICE_CODE=#{_parameter,jdbcType=INTEGER} and DELETED_FLAG='N'
  </select>
    <select id="countDevicesByDeviceType" parameterType="java.lang.Integer" resultType="java.lang.Integer">
  	select count(1) from device_file as f left join device_code as c on(f.DEVICE_CODE=c.DEVICE_CODE) where c.TYPE_ID = #{_parameter,jdbcType=INTEGER}
  </select>
    <select id="countDevicesByPackageStatus" parameterType="java.lang.String" resultType="java.lang.Integer">
  	select count(1) from device_file as f left join device_file_snapshot as s on(f.`SN`=s.`SN`) where s.`PACKAGE_STATU`= #{_parameter,jdbcType=VARCHAR} 
  </select>
    <select id="countDevices" resultType="java.lang.Integer">
  	select count(1) from device_file
  </select>
    <select id="getMaxDeviceFileId" resultType="java.lang.Integer">
  	select max(`ID`) from device_file
  </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from device_file
    where ID = #{id,jdbcType=INTEGER}
  </delete>

    <insert id="insert" parameterType="cn.com.glsx.supplychain.model.DeviceFile">
    insert into device_file (ID, SN, DEVICE_CODE, 
      ORDER_CODE, VERIF_CODE, BATCH_NO, 
      PACKAGE_ID, ANDROID_PACKAGE_ID, OPERATOR_MERCHANT_NO, 
      SEND_MERCHANT_NO, IN_STORAGE_TIME, OUT_STORAGE_TIME, 
      OUT_STORAGE_TYPE, TERMINAL_DISCODE, EXTERNAL_FLAG, 
      MANUFACTURER_CODE, CREATED_BY, CREATED_DATE, 
      UPDATED_BY, UPDATED_DATE, DELETED_FLAG,FIRMWARE_ID,CARD_ID
      )
    values (#{id,jdbcType=INTEGER}, #{sn,jdbcType=VARCHAR}, #{deviceCode,jdbcType=INTEGER}, 
      #{orderCode,jdbcType=VARCHAR}, #{verifCode,jdbcType=VARCHAR}, #{batchNo,jdbcType=VARCHAR}, 
      #{packageId,jdbcType=INTEGER}, #{androidPackageId,jdbcType=INTEGER}, #{operatorMerchantNo,jdbcType=VARCHAR}, 
      #{sendMerchantNo,jdbcType=VARCHAR}, #{inStorageTime,jdbcType=VARCHAR}, #{outStorageTime,jdbcType=VARCHAR}, 
      #{outStorageType,jdbcType=VARCHAR}, #{terminalDiscode,jdbcType=VARCHAR}, #{externalFlag,jdbcType=VARCHAR}, 
      #{manufacturerCode,jdbcType=VARCHAR}, #{createdBy,jdbcType=VARCHAR}, #{createdDate,jdbcType=TIMESTAMP}, 
      #{updatedBy,jdbcType=VARCHAR}, #{updatedDate,jdbcType=TIMESTAMP}, #{deletedFlag,jdbcType=VARCHAR},#{firmwareId,jdbcType=INTEGER},
      #{cardId,jdbcType=INTEGER}
      )
  </insert>

    <insert id="insertOnDuplicateKeyUpdate" parameterType="cn.com.glsx.supplychain.model.DeviceFile">
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into device_file(SN, DEVICE_CODE,
        ORDER_CODE, VERIF_CODE, BATCH_NO,
        PACKAGE_ID, ANDROID_PACKAGE_ID, OPERATOR_MERCHANT_NO,
        SEND_MERCHANT_NO, IN_STORAGE_TIME, OUT_STORAGE_TIME,
        OUT_STORAGE_TYPE, TERMINAL_DISCODE, EXTERNAL_FLAG,
        MANUFACTURER_CODE, CREATED_BY, CREATED_DATE,
        UPDATED_BY, UPDATED_DATE, DELETED_FLAG,FIRMWARE_ID,CARD_ID)
        values(#{sn,jdbcType=VARCHAR}, #{deviceCode,jdbcType=INTEGER},
        #{orderCode,jdbcType=VARCHAR}, #{verifCode,jdbcType=VARCHAR}, #{batchNo,jdbcType=VARCHAR},
        #{packageId,jdbcType=INTEGER}, #{androidPackageId,jdbcType=INTEGER}, #{operatorMerchantNo,jdbcType=VARCHAR},
        #{sendMerchantNo,jdbcType=VARCHAR}, #{inStorageTime,jdbcType=VARCHAR}, #{outStorageTime,jdbcType=VARCHAR},
        #{outStorageType,jdbcType=VARCHAR}, #{terminalDiscode,jdbcType=VARCHAR}, #{externalFlag,jdbcType=VARCHAR},
        #{manufacturerCode,jdbcType=VARCHAR}, #{createdBy,jdbcType=VARCHAR}, #{createdDate,jdbcType=TIMESTAMP},
        #{updatedBy,jdbcType=VARCHAR}, #{updatedDate,jdbcType=TIMESTAMP},
        #{deletedFlag,jdbcType=VARCHAR},#{firmwareId,jdbcType=INTEGER},
        #{cardId,jdbcType=INTEGER}
        ) on duplicate key update
        SN=values(SN), DEVICE_CODE=values(DEVICE_CODE),
        ORDER_CODE=values(ORDER_CODE), VERIF_CODE=values(VERIF_CODE), BATCH_NO=values(BATCH_NO),
        PACKAGE_ID=values(PACKAGE_ID), ANDROID_PACKAGE_ID=values(ANDROID_PACKAGE_ID),
        OPERATOR_MERCHANT_NO=values(OPERATOR_MERCHANT_NO),
        SEND_MERCHANT_NO=values(SEND_MERCHANT_NO), IN_STORAGE_TIME=values(IN_STORAGE_TIME),
        OUT_STORAGE_TIME=values(OUT_STORAGE_TIME),
        OUT_STORAGE_TYPE=values(OUT_STORAGE_TYPE), TERMINAL_DISCODE=values(TERMINAL_DISCODE),
        EXTERNAL_FLAG=values(EXTERNAL_FLAG),
        MANUFACTURER_CODE=values(MANUFACTURER_CODE), UPDATED_BY=values(UPDATED_BY), UPDATED_DATE=values(UPDATED_DATE),
        DELETED_FLAG=values(DELETED_FLAG),
        FIRMWARE_ID=values(FIRMWARE_ID),CARD_ID=values(CARD_ID)
    </insert>

    <insert id="batchInsertOnDuplicateKeyUpdate" parameterType="java.util.List">
        insert into
        device_file(SN,DEVICE_CODE,BATCH_NO,PACKAGE_ID,VERIF_CODE,SEND_MERCHANT_NO,IN_STORAGE_TIME,OUT_STORAGE_TIME,CREATED_DATE,UPDATED_DATE,
        CREATED_BY,UPDATED_BY,OUT_STORAGE_TYPE,EXTERNAL_FLAG,DELETED_FLAG,CARD_ID)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.sn,jdbcType=VARCHAR},
            #{item.deviceCode,jdbcType=INTEGER},
            #{item.batchNo,jdbcType=VARCHAR},
            #{item.packageId,jdbcType=INTEGER},
            #{item.verifCode,jdbcType=VARCHAR},
            #{item.sendMerchantNo,jdbcType=VARCHAR},
            #{item.inStorageTime,jdbcType=VARCHAR},
            #{item.outStorageTime,jdbcType=VARCHAR},
            #{item.createdDate,jdbcType=TIMESTAMP},
            #{item.updatedDate,jdbcType=TIMESTAMP},
            #{item.createdBy,jdbcType=VARCHAR},
            #{item.updatedBy,jdbcType=VARCHAR},
            #{item.outStorageType,jdbcType=VARCHAR},
            #{item.externalFlag,jdbcType=VARCHAR},
            #{item.deletedFlag,jdbcType=VARCHAR},
            #{item.cardId,jdbcType=INTEGER}
            )
        </foreach>
        on duplicate key update
        SN = values(SN),
        DEVICE_CODE = values(DEVICE_CODE),
        BATCH_NO = values(BATCH_NO),
        PACKAGE_ID = values(PACKAGE_ID),
        VERIF_CODE = values(VERIF_CODE),
        SEND_MERCHANT_NO = values(SEND_MERCHANT_NO),
        IN_STORAGE_TIME = values(IN_STORAGE_TIME),
        OUT_STORAGE_TIME = values(OUT_STORAGE_TIME),
        CREATED_DATE = values(CREATED_DATE),
        UPDATED_DATE = values(UPDATED_DATE),
        CREATED_BY = values(CREATED_BY),
        UPDATED_BY = values(UPDATED_BY),
        OUT_STORAGE_TYPE = values(OUT_STORAGE_TYPE),
        EXTERNAL_FLAG = values(EXTERNAL_FLAG),
        DELETED_FLAG = values(DELETED_FLAG),
        CARD_ID = values(CARD_ID)
    </insert>

    <insert id="insertSelective" parameterType="cn.com.glsx.supplychain.model.DeviceFile">
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into device_file
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="sn != null">
                SN,
            </if>
            <if test="deviceCode != null">
                DEVICE_CODE,
            </if>
            <if test="orderCode != null">
                ORDER_CODE,
            </if>
            <if test="verifCode != null">
                VERIF_CODE,
            </if>
            <if test="batchNo != null">
                BATCH_NO,
            </if>
            <if test="packageId != null">
                PACKAGE_ID,
            </if>
            <if test="androidPackageId != null">
                ANDROID_PACKAGE_ID,
            </if>
            <if test="operatorMerchantNo != null">
                OPERATOR_MERCHANT_NO,
            </if>
            <if test="sendMerchantNo != null">
                SEND_MERCHANT_NO,
            </if>
            <if test="inStorageTime != null">
                IN_STORAGE_TIME,
            </if>
            <if test="outStorageTime != null">
                OUT_STORAGE_TIME,
            </if>
            <if test="outStorageType != null">
                OUT_STORAGE_TYPE,
            </if>
            <if test="terminalDiscode != null">
                TERMINAL_DISCODE,
            </if>
            <if test="externalFlag != null">
                EXTERNAL_FLAG,
            </if>
            <if test="manufacturerCode != null">
                MANUFACTURER_CODE,
            </if>
            <if test="createdBy != null">
                CREATED_BY,
            </if>
            <if test="createdDate != null">
                CREATED_DATE,
            </if>
            <if test="updatedBy != null">
                UPDATED_BY,
            </if>
            <if test="updatedDate != null">
                UPDATED_DATE,
            </if>
            <if test="deletedFlag != null">
                DELETED_FLAG,
            </if>
            <if test="firmwareId != null">
                FIRMWARE_ID,
            </if>
            <if test="cardId != null">
                CARD_ID,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="sn != null">
                #{sn,jdbcType=VARCHAR},
            </if>
            <if test="deviceCode != null">
                #{deviceCode,jdbcType=INTEGER},
            </if>
            <if test="orderCode != null">
                #{orderCode,jdbcType=VARCHAR},
            </if>
            <if test="verifCode != null">
                #{verifCode,jdbcType=VARCHAR},
            </if>
            <if test="batchNo != null">
                #{batchNo,jdbcType=VARCHAR},
            </if>
            <if test="packageId != null">
                #{packageId,jdbcType=INTEGER},
            </if>
            <if test="androidPackageId != null">
                #{androidPackageId,jdbcType=INTEGER},
            </if>
            <if test="operatorMerchantNo != null">
                #{operatorMerchantNo,jdbcType=VARCHAR},
            </if>
            <if test="sendMerchantNo != null">
                #{sendMerchantNo,jdbcType=VARCHAR},
            </if>
            <if test="inStorageTime != null">
                #{inStorageTime,jdbcType=VARCHAR},
            </if>
            <if test="outStorageTime != null">
                #{outStorageTime,jdbcType=VARCHAR},
            </if>
            <if test="outStorageType != null">
                #{outStorageType,jdbcType=VARCHAR},
            </if>
            <if test="terminalDiscode != null">
                #{terminalDiscode,jdbcType=VARCHAR},
            </if>
            <if test="externalFlag != null">
                #{externalFlag,jdbcType=VARCHAR},
            </if>
            <if test="manufacturerCode != null">
                #{manufacturerCode,jdbcType=VARCHAR},
            </if>
            <if test="createdBy != null">
                #{createdBy,jdbcType=VARCHAR},
            </if>
            <if test="createdDate != null">
                #{createdDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updatedBy != null">
                #{updatedBy,jdbcType=VARCHAR},
            </if>
            <if test="updatedDate != null">
                #{updatedDate,jdbcType=TIMESTAMP},
            </if>
            <if test="deletedFlag != null">
                #{deletedFlag,jdbcType=VARCHAR},
            </if>
            <if test="firmwareId != null">
                #{firmwareId,jdbcType=INTEGER},
            </if>
            <if test="cardId != null">
                #{cardId,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="cn.com.glsx.supplychain.model.DeviceFile">
        update device_file
        <set>
            <if test="sn != null">
                SN = #{sn,jdbcType=VARCHAR},
            </if>
            <if test="deviceCode != null">
                DEVICE_CODE = #{deviceCode,jdbcType=INTEGER},
            </if>
            <if test="orderCode != null">
                ORDER_CODE = #{orderCode,jdbcType=VARCHAR},
            </if>
            <if test="verifCode != null">
                VERIF_CODE = #{verifCode,jdbcType=VARCHAR},
            </if>
            <if test="batchNo != null">
                BATCH_NO = #{batchNo,jdbcType=VARCHAR},
            </if>
            <if test="packageId != null">
                PACKAGE_ID = #{packageId,jdbcType=INTEGER},
            </if>
            <if test="androidPackageId != null">
                ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER},
            </if>
            <if test="operatorMerchantNo != null">
                OPERATOR_MERCHANT_NO = #{operatorMerchantNo,jdbcType=VARCHAR},
            </if>
            <if test="sendMerchantNo != null">
                SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=VARCHAR},
            </if>
            <if test="inStorageTime != null">
                IN_STORAGE_TIME = #{inStorageTime,jdbcType=VARCHAR},
            </if>
            <if test="outStorageTime != null">
                OUT_STORAGE_TIME = #{outStorageTime,jdbcType=VARCHAR},
            </if>
            <if test="outStorageType != null">
                OUT_STORAGE_TYPE = #{outStorageType,jdbcType=VARCHAR},
            </if>
            <if test="terminalDiscode != null">
                TERMINAL_DISCODE = #{terminalDiscode,jdbcType=VARCHAR},
            </if>
            <if test="externalFlag != null">
                EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR},
            </if>
            <if test="manufacturerCode != null">
                MANUFACTURER_CODE = #{manufacturerCode,jdbcType=VARCHAR},
            </if>
            <if test="createdBy != null">
                CREATED_BY = #{createdBy,jdbcType=VARCHAR},
            </if>
            <if test="createdDate != null">
                CREATED_DATE = #{createdDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updatedBy != null">
                UPDATED_BY = #{updatedBy,jdbcType=VARCHAR},
            </if>
            <if test="updatedDate != null">
                UPDATED_DATE = #{updatedDate,jdbcType=TIMESTAMP},
            </if>
            <if test="deletedFlag != null">
                DELETED_FLAG = #{deletedFlag,jdbcType=VARCHAR},
            </if>
            <if test="firmwareId != null">
                FIRMWARE_ID = #{firmwareId,jdbcType=INTEGER},
            </if>
            <if test="cardId != null">
                CARD_ID = #{cardId,jdbcType=INTEGER},
            </if>
        </set>
        where ID = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="cn.com.glsx.supplychain.model.DeviceFile">
    update device_file
    set SN = #{sn,jdbcType=VARCHAR},
      DEVICE_CODE = #{deviceCode,jdbcType=INTEGER},
      ORDER_CODE = #{orderCode,jdbcType=VARCHAR},
      VERIF_CODE = #{verifCode,jdbcType=VARCHAR},
      BATCH_NO = #{batchNo,jdbcType=VARCHAR},
      PACKAGE_ID = #{packageId,jdbcType=INTEGER},
      ANDROID_PACKAGE_ID = #{androidPackageId,jdbcType=INTEGER},
      OPERATOR_MERCHANT_NO = #{operatorMerchantNo,jdbcType=VARCHAR},
      SEND_MERCHANT_NO = #{sendMerchantNo,jdbcType=VARCHAR},
      IN_STORAGE_TIME = #{inStorageTime,jdbcType=VARCHAR},
      OUT_STORAGE_TIME = #{outStorageTime,jdbcType=VARCHAR},
      OUT_STORAGE_TYPE = #{outStorageType,jdbcType=VARCHAR},
      TERMINAL_DISCODE = #{terminalDiscode,jdbcType=VARCHAR},
      EXTERNAL_FLAG = #{externalFlag,jdbcType=VARCHAR},
      MANUFACTURER_CODE = #{manufacturerCode,jdbcType=VARCHAR},
      CREATED_BY = #{createdBy,jdbcType=VARCHAR},
      CREATED_DATE = #{createdDate,jdbcType=TIMESTAMP},
      UPDATED_BY = #{updatedBy,jdbcType=VARCHAR},
      UPDATED_DATE = #{updatedDate,jdbcType=TIMESTAMP},
      DELETED_FLAG = #{deletedFlag,jdbcType=VARCHAR},
      FIRMWARE_ID = #{firmwareId,jdbcType=INTEGER},
      CARD_ID = #{cardId,jdbcType=INTEGER}
    where ID = #{id,jdbcType=INTEGER}
  </update>
</mapper>